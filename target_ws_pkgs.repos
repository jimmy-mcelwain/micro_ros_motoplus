# SPDX-FileCopyrightText: 2024, Yaskawa America, Inc.
# SPDX-FileCopyrightText: 2024, Delft University of Technology
#
# SPDX-License-Identifier: CC0-1.0

# Revisions checked out mostly target ROS 2 Jazzy (or the micro-ROS equivalents).
#
# NOTE: this list has not been pruned. It's possible some of these repositories
# are not actually needed for the MotoPlus platform.
#
# NOTE2: where possible, these entries point to specific commits or tags.
# Other commits or tags have not been tested, and may result in either build
# failures or non-functioning binaries.
repositories:
  eProsima/Micro-CDR:
    type: git
    url: https://github.com/eProsima/Micro-CDR.git
    version: v2.0.1
  eProsima/Micro-XRCE-DDS-Client:
    type: git
    url: https://github.com/yaskawa-global/microxrcedds_client_motoplus.git
    # this is 2.4.3 from upstream, but with our own patches
    # branch name: 'motoplus_dev/upstream/v2.4.3_with_patches_iron'
    # NOTE: name says 'iron', but the same versions appear to be used for all
    # supported ROS 2 distributions
    version: 3178c635e09b73b371808c3be2d33e5109b74e9f

  ros2/libyaml_vendor:
    type: git
    url: https://github.com/ros2/libyaml_vendor.git
    version: 1.6.3

  ros2/rcl_logging:
    type: git
    url: https://github.com/ros2/rcl_logging.git
    version: 3.1.0
  ros2/rclc:
    type: git
    url: https://github.com/ros2/rclc.git
    version: 995cda8c68456c7477ed103d9419a161fd068960

  ros2/rmw:
    type: git
    url: https://github.com/yaskawa-global/rmw.git
    version: cb84993f73d74f308230fe6b2223f8711252dece
  ros2/rmw_implementation:
    type: git
    url: https://github.com/ros2/rmw_implementation.git
    version: 2.15.3
  # needed because of https://github.com/ros2/rcl_interfaces/issues/144
  ros2/rosidl:
    type: git
    url: https://github.com/ros2/rosidl.git
    version: 4.6.4
  ros2/rosidl_core:
    type: git
    url: https://github.com/ros2/rosidl_core.git
    version: 0.2.0
  ros2/rosidl_dds:
    type: git
    url: https://github.com/ros2/rosidl_dds.git
    version: 0.11.1
  ros2/rosidl_defaults:
    type: git
    url: https://github.com/ros2/rosidl_defaults.git
    version: 1.6.0
  ros2/rosidl_dynamic_typesupport:
    type: git
    url: https://github.com/ros2/rosidl_dynamic_typesupport.git
    version: 0.1.2

  uros/rcl:
    type: git
    # this is a regular fork, but renamed due to potential clashes with ros2/rcl
    url: https://github.com/yaskawa-global/micro_ros_rcl.git
    # NOTE: the fork adds 6 additional patches, on top of 'upstream/jazzy'.
    # Branch name: 'jazzy'
    version: 032fee21bcbd75ad0a8b43fe5f1a6c983d5f0d34
  uros/rcutils:
    type: git
    url: https://github.com/yaskawa-global/rcutils.git
    # 'upstream/jazzy' (couple commits past 6.7.2), with 6 patches
    #  Branch name: 'jazzy'
    version: 0512f00dc515c1866eec5dc732e10f41228b707f
  uros/micro_ros_utilities:
    type: git
    url: https://github.com/micro-ROS/micro_ros_utilities.git
    version: 5.0.1
  uros/rmw-microxrcedds:
    type: git
    url: https://github.com/micro-ROS/rmw-microxrcedds.git
    version: 5.0.1
  uros/rosidl_typesupport:
    type: git
    url: https://github.com/yaskawa-global/rosidl_typesupport.git
    # 'upstream/jazzy' with a single patch of our own
    #  Branch name: 'jazzy'
    version: 79885fc1a3e73e0e4205475e7e3804bba73e1e1d
  uros/rosidl_typesupport_microxrcedds:
    type: git
    url: https://github.com/micro-ROS/rosidl_typesupport_microxrcedds.git
    version: 5.0.1



  uros/tracetools:
    type: git
    url: https://github.com/ros2/ros2_tracing.git
    version: 8d898b5ff0d79ef34eeae73a6ef3a20b30fe1ac8
    # NOTE: this is not the same as the jazzy release. 
    # This is a commit on rolling which is a few commits
    # past where jazzy and rolling diverged. 
    # This commit contains a necessary change
    # The __attribute__((deprecated(msg))) form is 
    # only supported in GCC version 4.5+, which is newer than 
    # what we are using. The MotoPlus compiler does not like this line:
    # https://github.com/ros2/ros2_tracing/blob/42e26cca398246db56881e17394abf9f8d3b7755/tracetools/include/tracetools/tracetools.h#L130
    # We could make a new fork and cherry pick this commit instead
    # but decided against it to avoid having to maintain a fork. 

  # messages/services/actions
  ros2/common_interfaces:
    type: git
    url: https://github.com/ros2/common_interfaces.git
    version: 5.3.5
  ros2/rcl_interfaces:
    type: git
    url: https://github.com/ros2/rcl_interfaces.git
    version: 2.0.2
  ros2/unique_identifier_msgs:
    type: git
    url: https://github.com/ros2/unique_identifier_msgs.git
    version: 2.5.0

  # only used to determine the ROS 2 codename during packaging
  ros2/ros_environment:
    type: git
    url: https://github.com/ros/ros_environment.git
    version: 4.2.1

  # extra dependencies needed for MotoROS2
  extra/industrial_msgs:
    type: git
    url: https://github.com/ros-industrial/industrial_core.git
    # branch: 'ros2_msgs_only'
    version: d547cdcfdaf3bc0d46325215b8219b0a190c8e6c
  extra/ros-controls/control_msgs:
    type: git
    url: https://github.com/ros-controls/control_msgs.git
    version: 5.2.0
  extra/ros2/geometry2_tf2_msgs:
    type: git
    url: https://github.com/ros2/geometry2.git
    version: 0.36.4
  extra/motoros2_interfaces:
    type: git
    url: https://github.com/yaskawa-global/motoros2_interfaces.git
    version: 0.1.4
